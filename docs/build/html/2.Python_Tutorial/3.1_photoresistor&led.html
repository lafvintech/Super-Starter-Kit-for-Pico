<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chapter 10 Photoresistor &amp; LED &mdash; Super-Starter-Kit-for-ESP32-S3-WROOM  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about_this_kit.html">About This Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Component List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preparation/preparation.html">Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.C_Tutorial/c_tutorial.html">C Language Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_tutorial.html">Python Language Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components_Kit/Components_Kit.html">Components Introduction</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Super-Starter-Kit-for-ESP32-S3-WROOM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Chapter 10 Photoresistor &amp; LED</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/2.Python_Tutorial/3.1_photoresistor&amp;led.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chapter-10-photoresistor-led">
<h1>Chapter 10 Photoresistor &amp; LED<a class="headerlink" href="#chapter-10-photoresistor-led" title="Link to this heading"></a></h1>
<p>In this chapter, we will learn how to use a photoresistor.</p>
<section id="project-10-1-nightlamp">
<h2>Project 10.1 NightLamp<a class="headerlink" href="#project-10-1-nightlamp" title="Link to this heading"></a></h2>
<p>A photoresistor is very sensitive to the amount of light present. We can take
advantage of the characteristic to make a nightlight with the following function:
when the ambient light is less (darker environment) the LED will automatically
become brighter to compensate and when the ambient light is greater (brighter environment)
the LED will automatically dim to compensate.</p>
<section id="component-list">
<h3>Component List<a class="headerlink" href="#component-list" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Raspberry Pi Pico W x1</p></li>
<li><p>830 Tie-Points Breadboard x1</p></li>
<li><p>Resistor 10kΩ  x1</p></li>
<li><p>Resistor 220Ω  x1</p></li>
<li><p>Photoresistor x1</p></li>
<li><p>LED x1</p></li>
<li><p>Jumper Wire Several</p></li>
</ul>
</section>
<section id="component-knowledge">
<h3>Component knowledge<a class="headerlink" href="#component-knowledge" title="Link to this heading"></a></h3>
<section id="photoresistor">
<h4><a class="reference internal" href="../components_Kit/component_photoresistor.html#cpn-photoresistor"><span class="std std-ref">Photoresistor</span></a><a class="headerlink" href="#photoresistor" title="Link to this heading"></a></h4>
</section>
</section>
<section id="connect">
<h3>Connect<a class="headerlink" href="#connect" title="Link to this heading"></a></h3>
<p>The circuit of this project is similar to project Soft Light. The only difference
is that the input signal is changed from a potentiometer to a combination of a
photoresistor and a resistor.</p>
<img alt="../_images/10.png" src="../_images/10.png" />
</section>
<section id="code">
<h3>Code<a class="headerlink" href="#code" title="Link to this heading"></a></h3>
<p>Move the program folder “Super_Starter_Kit_for_ESP32_S3/Python/Python_C
odes” to disk(D) in advance with the path of “D:/Micropython_Codes”.
Codes of this project is logically the same as the project Soft Light.</p>
<p><strong>10.1_Nightlamp</strong></p>
<img alt="2.Python_Tutorial/img/software/10.1.png" src="2.Python_Tutorial/img/software/10.1.png" />
<p>Click “Run current script”. Cover the photoresistor with your hands or illuminate
it with lights, the brightness of LEDs will change.</p>
<p>The following is the program code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span><span class="n">PWM</span><span class="p">,</span><span class="n">ADC</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">pwm</span> <span class="o">=</span><span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">),</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">adc</span><span class="o">=</span><span class="n">ADC</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">adc</span><span class="o">.</span><span class="n">atten</span><span class="p">(</span><span class="n">ADC</span><span class="o">.</span><span class="n">ATTN_11DB</span><span class="p">)</span>
<span class="n">adc</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">ADC</span><span class="o">.</span><span class="n">WIDTH_12BIT</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">remap</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">oldMin</span><span class="p">,</span><span class="n">oldMax</span><span class="p">,</span><span class="n">newMin</span><span class="p">,</span><span class="n">newMax</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">((</span><span class="n">value</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">newMax</span><span class="o">-</span><span class="n">newMin</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">oldMax</span><span class="o">-</span><span class="n">oldMin</span><span class="p">))</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">adcValue</span><span class="o">=</span><span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">pwmValue</span><span class="o">=</span><span class="n">remap</span><span class="p">(</span><span class="n">adcValue</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4095</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1023</span><span class="p">)</span>
        <span class="n">pwm</span><span class="o">.</span><span class="n">duty</span><span class="p">(</span><span class="n">pwmValue</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">adcValue</span><span class="p">,</span><span class="n">pwmValue</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">pwm</span><span class="o">.</span><span class="n">deinit</span><span class="p">()</span>
</pre></div>
</div>
<p>In this code, we use ADC to read the ADC value of the photoresist and map it to
the PWM of the control LED, so that the brightness of the LED can change accordi
ngly with the change of the ambient light intensity.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, LAFVIN.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>