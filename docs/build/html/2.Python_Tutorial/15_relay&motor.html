<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chapter 15 Relay &amp; Motor &mdash; Super-Starter-Kit-for-ESP32-S3-WROOM  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about_this_kit.html">About This Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Component List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preparation/preparation.html">Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.C_Tutorial/c_tutorial.html">C Language Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_tutorial.html">Python Language Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components_Kit/Components_Kit.html">Components Introduction</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Super-Starter-Kit-for-ESP32-S3-WROOM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Chapter 15 Relay &amp; Motor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/2.Python_Tutorial/15_relay&amp;motor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chapter-15-relay-motor">
<h1>Chapter 15 Relay &amp; Motor<a class="headerlink" href="#chapter-15-relay-motor" title="Link to this heading"></a></h1>
<p>In this chapter, we will learn a kind of special switch module, relay module.</p>
<section id="project-15-1-control-motor-with-potentiometer">
<h2>Project 15.1 Control Motor with Potentiometer<a class="headerlink" href="#project-15-1-control-motor-with-potentiometer" title="Link to this heading"></a></h2>
<p>Control the direction and speed of the motor with a potentiometer.</p>
<section id="component-list">
<h3>Component List<a class="headerlink" href="#component-list" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Raspberry Pi Pico W x1</p></li>
<li><p>830 Tie-Points Breadboard x1</p></li>
<li><p>L293D x1</p></li>
<li><p>9V Battery Connector x1</p></li>
<li><p>Potentiometer(10k) x1</p></li>
<li><p>Motor &amp; Fan x1</p></li>
<li><p>Jumper Wire</p></li>
</ul>
</section>
<section id="connect">
<h3>Connect<a class="headerlink" href="#connect" title="Link to this heading"></a></h3>
<p>Use caution when connecting this circuit, because the DC motor is a high-power
component, do not use the power provided by the ESP32-S3 to power the motor directly,
which may cause permanent damage to your ESP32-S3! The logic circuit can be powered
by the ESP32-S3 power or an external power supply, which should share a common
ground with ESP32-S3.</p>
<img alt="../_images/151.png" src="../_images/151.png" />
<p>Note: the motor circuit uses A large current, about 0.2-0.3A without load.We rec
ommend that you use a 9V battery to power the extension board.</p>
</section>
<section id="code">
<h3>Code<a class="headerlink" href="#code" title="Link to this heading"></a></h3>
<p>Move the program folder “Super_Starter_Kit_for_ESP32_S3/Python/Python_C
odes” to disk(D) in advance with the path of “D:/Micropython_Codes”.
Open “Thonny”, click “This computer” &gt;&gt; “D:” &gt;&gt; “Micropython_Codes” &gt;&gt; “15.2_Moto
r_And_Driver” and double click “Motor_And_Driver.py”.</p>
<p><strong>15.1_Motor_And_Driver</strong></p>
<img alt="2.Python_Tutorial/img/software/15.1.png" src="2.Python_Tutorial/img/software/15.1.png" />
<p>Click “Run current script”, rotate the potentiometer in one direction and the
motor speeds up slowly in one direction. Rotate the potentiometer in the other
direction and the motor will slow down to stop. And then rotate it in the original
direction to accelerate the motor.</p>
<img alt="../_images/15.12.png" src="../_images/15.12.png" />
</section>
<section id="id1">
<h3>Code<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>The following is the program code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">ADC</span><span class="p">,</span><span class="n">Pin</span><span class="p">,</span><span class="n">PWM</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">in1Pin</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">in2Pin</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>

<span class="n">enablePin</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">=</span><span class="n">PWM</span><span class="p">(</span><span class="n">enablePin</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>

<span class="n">adc</span><span class="o">=</span><span class="n">ADC</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">adc</span><span class="o">.</span><span class="n">atten</span><span class="p">(</span><span class="n">ADC</span><span class="o">.</span><span class="n">ATTN_11DB</span><span class="p">)</span>
<span class="n">adc</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">ADC</span><span class="o">.</span><span class="n">WIDTH_12BIT</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">driveMotor</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span><span class="n">spd</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">dir</span><span class="p">:</span>
        <span class="n">in1Pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">in2Pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">in1Pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">in2Pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">pwm</span><span class="o">.</span><span class="n">duty</span><span class="p">(</span><span class="n">spd</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">potenVal</span> <span class="o">=</span> <span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">rotationSpeed</span> <span class="o">=</span> <span class="n">potenVal</span> <span class="o">-</span> <span class="mi">2048</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">potenVal</span> <span class="o">&gt;</span> <span class="mi">2048</span><span class="p">):</span>
            <span class="n">rotationDir</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rotationDir</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">rotationSpeed</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">((</span><span class="n">potenVal</span><span class="o">-</span><span class="mi">2047</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">driveMotor</span><span class="p">(</span><span class="n">rotationDir</span><span class="p">,</span><span class="n">rotationSpeed</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">pwm</span><span class="o">.</span><span class="n">deinit</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, LAFVIN.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>